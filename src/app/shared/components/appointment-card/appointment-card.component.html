<div class="appointment-card" [class.compact]="compact">
  <div class="card-header">
    <div class="time-info">
      <span class="time">{{ getAppointmentTime() }}</span>
      <span class="duration">{{ appointment.duration }} min</span>
    </div>
    <app-status-badge [status]="appointment.status"></app-status-badge>
  </div>

  <div class="card-body">
    <div class="patient-info" *ngIf="showPatient">
      <div class="icon">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
        </svg>
      </div>
      <div class="info">
        <span class="label">Paciente:</span>
        <span class="value">{{ appointment.patientName }}</span>
      </div>
    </div>

    <div class="professional-info" *ngIf="showProfessional">
      <div class="icon">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
      </div>
      <div class="info">
        <span class="label">Profesional:</span>
        <span class="value">{{ appointment.professionalName }}</span>
      </div>
    </div>

    <div class="reason-info" *ngIf="appointment.reason && !compact">
      <div class="icon">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
      </div>
      <div class="info">
        <span class="label">Motivo:</span>
        <span class="value">{{ appointment.reason }}</span>
      </div>
    </div>

    <div class="notes-info" *ngIf="appointment.notes && !compact">
      <p class="notes">{{ appointment.notes }}</p>
    </div>
  </div>

  <div class="card-actions">
    <button
      type="button"
      class="btn btn-secondary btn-sm"
      (click)="viewAppointment()"
    >
      Ver Detalles
    </button>

    <button
      *ngIf="canConfirm()"
      type="button"
      class="btn btn-success btn-sm"
      (click)="confirmAppointment()"
    >
      Confirmar
    </button>

    <button
      *ngIf="canComplete()"
      type="button"
      class="btn btn-primary btn-sm"
      (click)="completeAppointment()"
    >
      Completar
    </button>

    <button
      *ngIf="canCancel()"
      type="button"
      class="btn btn-danger btn-sm"
      (click)="cancelAppointment()"
    >
      Cancelar
    </button>
  </div>
</div>
