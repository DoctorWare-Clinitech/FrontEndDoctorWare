<div class="card">
  <div class="p-4 border-b">
    <h2 class="text-lg font-semibold">
      Agenda para el {{ selectedDate | dateFormat:'EEEE dd/MM/yyyy' }}
    </h2>
  </div>

  @if (isLoading()) {
    <div class="flex justify-center items-center h-64">
      <div class="spinner"></div>
    </div>
  } @else {
    <div class="max-h-[70vh] overflow-y-auto">
      <table class="w-full text-left">
        <thead class="bg-gray-50 sticky top-0">
          <tr>
            <th class="p-3 text-sm font-semibold text-gray-600">Hora</th>
            <th class="p-3 text-sm font-semibold text-gray-600">Estado</th>
            <th class="p-3 text-sm font-semibold text-gray-600">Acción</th>
          </tr>
        </thead>
        <tbody>
          @for (slot of slots(); track slot.time) {
            <tr class="border-t">
              <td class="p-3 font-mono text-gray-800">{{ slot.time }}</td>
              <td class="p-3">
                @if (slot.available) {
                  <span class="px-2 py-1 text-xs font-medium text-green-800 bg-green-100 rounded-full">
                    Disponible
                  </span>
                } @else {
                  <span class="px-2 py-1 text-xs font-medium text-gray-800 bg-gray-200 rounded-full">
                    Ocupado
                  </span>
                }
              </td>
              <td class="p-3">
                @if (slot.available) {
                  <button (click)="bookAppointment(slot)" class="btn-primary-outline btn-sm">
                    Reservar
                  </button>
                } @else {
                  <button class="btn-secondary-outline btn-sm" disabled>
                    Ver Turno
                  </button>
                }
              </td>
            </tr>
          }
          @if (slots().length === 0) {
            <tr>
              <td colspan="3" class="text-center py-12 text-gray-500">
                No hay actividad para este día.
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>
